@import '../../new-settings';
@import '../mixins';

$fd-list-navigation-item-height: 2.75rem !default;
$fd-list-navigation-item-indicator-spacing: var(--fdVerticalNavigation_Indicator_Spacing) !default;
$fd-list-navigation-item-text-spacing: var(--fdVerticalNav_Item_Text_Spacing) !default;
$fd-list-second-level-popover-position: 3.25rem !default;

@mixin fd-vertical-nav-navigation($blockList: #{$fd-namespace}-list) {
  .#{$blockList} {
    --fdVertNavigation_List_Item_Height: 2.375rem;
    --fdVertNavigation_List_Item_Background: var(--sapNavigation_Background);
    --fdVertNavigation_List_Item_Border_Color: var(--fdVertNavigation_List_Item_Border_Color_Normal);
    --fdVertNavigation_List_Item_Border_Bottom_Color: var(--fdVertNavigation_List_Item_Border_Bottom_Color_Normal);
    --fdVertNavigation_List_Item_Selection_Indicator_Color: transparent;

    &__navigation-item-indicator {
      @include fd-reset();
      @include fd-set-position-right(0);

      position: absolute;
      top: 0;
      border-radius: 0 var(--fdVertNavigation_List_Item_Border_Radius) var(--fdVertNavigation_List_Item_Border_Radius) 0;
      width: 0.1875rem;
      overflow: hidden;
      height: var(--fdVertNavigation_List_Item_Height);

      @include fd-rtl() {
        border-radius: var(--fdVertNavigation_List_Item_Border_Radius) 0 0 var(--fdVertNavigation_List_Item_Border_Radius);
      }

      &::after {
        content: '';
        width: 0.1875rem;
        display: inline-block;
        position: absolute;
        right: 0;
        top: var(--fdVerticalNav_Item_Indicator_Top);
        height: var(--fdVertNavigation_List_Item_Height);
        background-color: var(--sapSelectedColor);
        color: var(--sapSelectedColor);
        border-radius: var(--sapField_BorderCornerRadius);
        margin-right: $fd-list-navigation-item-indicator-spacing;
      }

      @include fd-rtl() {
        &::after {
          right: unset;
          margin-right: 0;
          left: 0;
          margin-left: $fd-list-navigation-item-indicator-spacing;
        }
      }
    }

    &__navigation-item {
      @include fd-reset();
      @include fd-fiori-focus();

      z-index: 3;
      width: 100%;
      cursor: pointer;
      position: relative;
      min-height: var(--fdVertNavigation_List_Item_Height);
      border-radius: var(--fdVertNavigation_List_Item_Border_Radius);
      border: 0.0625rem solid var(--fdVertNavigation_List_Item_Border_Color);
      border-bottom: 0.0625rem solid var(--fdVertNavigation_List_Item_Border_Bottom_Color);

      &::before {
        top: 0;
        left: 0;
        right: 0;
        z-index: -1;
        content: "";
        width: 100%;
        position: absolute;
        height: var(--fdVertNavigation_List_Item_Height);
        background: var(--fdVertNavigation_List_Item_Background);
        border-radius: var(--fdVertNavigation_List_Item_Border_Radius);
      }

      &::after {
        @include fd-set-square(0.5rem);
        @include fd-set-position-right-pseudo(1rem);

        content: "";
        width: 100%;
        z-index: -1;
        position: absolute;
        border-radius: 50rem;
        transform: translateY(-50%);
        top: calc(var(--fdVertNavigation_List_Item_Height) * 0.5);
        background: var(--fdVertNavigation_List_Item_Selection_Indicator_Color);
      }

      @include fd-hover() {
        --fdVertNavigation_List_Item_Background: var(--sapNavigation_Hover_Background);
        --fdVertNavigation_List_Item_Border_Color: var(--fdVertNavigation_List_Item_Border_Color_Hover);
        --fdVertNavigation_List_Item_Border_Bottom_Color: var(--fdVertNavigation_List_Item_Border_Bottom_Color_Hover);
      }

      @include fd-active() {
        --fdVertNavigation_List_Item_Background: var(--sapNavigation_Active_Background);
        --fdVertNavigation_List_Item_Border_Color: var(--fdVertNavigation_List_Item_Border_Color_Active);
        --fdVertNavigation_List_Item_Border_Bottom_Color: var(--fdVertNavigation_List_Item_Border_Bottom_Color_Active);
      }

      @include fd-selected() {
        --fdVertNavigation_List_Item_Background: var(--sapNavigation_Selected_Background);
        --fdVertNavigation_List_Item_Border_Color: var(--fdVertNavigation_List_Item_Border_Color_Selected);
        --fdVertNavigation_List_Item_Border_Bottom_Color: var(--fdVertNavigation_List_Item_Border_Bottom_Color_Selected);
        --fdVertNavigation_List_Item_Selection_Indicator_Color: var(--sapList_SelectionBorderColor);
      }

      .#{$blockList} {
        display: none;
      }

      &.is-expanded {
        .#{$blockList} {
          @include fd-flex(column) {
            gap: 0.25rem;
          }

          width: auto;
          margin-top: 0.25rem;
        }
      }

      & > .#{$blockList}__navigation-item-text:first-child {
        @include fd-set-margin-left(0.5rem);
      }
    }

    &__navigation-item--expandable {
      .#{$blockList} .#{$blockList}__navigation-item .#{$blockList}__navigation-item-text {
        @include fd-set-margin-left(2rem);

        font-weight: 400;
      }

      @include fd-selected() {
        .#{$blockList}__navigation-item-text {
          max-width: 9rem;
        }

        &::after {
          @include fd-set-position-right-pseudo(2.25rem);
        }
      }
    }

    &__navigation-item--condensed {
      @include fd-set-paddings-x();
      @include fd-set-square(var(--fdVertNavigation_List_Item_Height));
      @include fd-flex();

      .#{$blockList}__navigation-item-popover {
        &--first-level,
        &--second-level {
          display: none;
          background: var(--sapList_AlternatingBackground);
        }
      }

      .#{$blockList}__navigation-item-text {
        display: none;
      }

      .#{$blockList}__navigation-item-icon {
        @include fd-set-square(calc(var(--fdVertNavigation_List_Item_Height) - 0.125rem));
        @include fd-set-margins-x(0, 0);

        line-height: var(--fdVertNavigation_List_Item_Height);
      }

      &.is-expanded {
        @include fd-set-width(15rem);

        @include fd-hover() {
          @include fd-set-width(15rem);
        }

        &::before {
          box-shadow: var(--sapContent_Shadow0);
          border-bottom-right-radius: 0;
        }

        @include fd-rtl() {
          &::before {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: var(--fdVertNavigation_List_Item_Border_Radius);
          }
        }

        .#{$blockList}__navigation-item-text {
          @include fd-set-margin-left(2.5rem) ;

          display: inline;
          font-size: 1rem;
        }

        .#{$blockList}__navigation-item-popover {
          &--first-level {
            display: none;
          }

          &--second-level {
            overflow: hidden;
            display: block;
            box-shadow: none;
            box-shadow: var(--sapContent_Shadow0);
            padding: 0.25rem 0.5rem 0.5rem;
            background: var(--sapList_Background);
            top: var(--fdVertNavigation_List_Item_Height);

            @include fd-set-width(11rem);
            @include fd-set-position-left(3.87rem);

            border-top-left-radius: 0;
            border-top-right-radius: 0;

            .fd-list__navigation-item.fd-list__navigation-item--condensed {
              @include fd-set-width(100%);

              padding: 0 0.5rem;
            }

            .#{$blockList}__navigation-item-text {
              @include fd-set-margin-left(0) ;

              display: inline;
              font-size: var(--sapFontSize);
              font-weight: 400;
            }

            .#{$blockList} {
              width: 100%;
              display: block;
              margin: 0 auto;
              border-top-left-radius: 0;
              border-top-right-radius: 0;
            }
          }
        }

        .#{$blockList}__navigation-item-arrow {
          display: none;
        }

        .#{$blockList}__navigation-item-indicator {
          background-color: var(--sapSelectedColor);

          &::after {
            display: none;
          }
        }
      }

      .#{$blockList}__navigation-item-arrow {
        display: none;
      }

      @include fd-hover() {
        @include fd-set-width(fit-content);
        @include fd-set-padding-right(0.5rem);

        align-items: flex-start;

        .#{$blockList}__navigation-item-text {
          display: inline-block;
        }
      }
    }

    &__navigation-item-icon {
      @include fd-set-margins-x(0.5rem, 0.25rem);

      width: 1rem;
      font-size: 1rem;
      text-align: center;
      vertical-align: top;
      font-family: 'SAP-icons';
      color: var(--sapList_TextColor);
      height: calc(var(--fdVertNavigation_List_Item_Height) - 0.125rem);
      line-height: calc(var(--fdVertNavigation_List_Item_Height) - 0.125rem);
    }

    &__navigation-item-text {
      @include fd-ellipsis();

      max-width: 10rem;
      font-weight: bold;
      display: inline-block;
      vertical-align: middle;
      font-size: var(--sapFontSize);
      color: var(--sapList_TextColor);
      line-height: var(--fdVertNavigation_List_Item_Height);
    }

    &__navigation-item-arrow {
      @include fd-reset();
      @include fd-button-reset();
      @include fd-set-position-right(0);

      position: absolute;
      font-size: 0.75rem;
      font-family: 'SAP-icons';
      color: var(--sapList_TextColor);
      background-color: transparent;
      width: var(--fdVertNavigation_List_Item_Height);
      height: var(--fdVertNavigation_List_Item_Height);

      @include fd-rtl() {
        transform: scaleX(-1);
      }

      @include fd-focus() {
        outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);
        outline-offset: var(--fdVerticalNav_Item_Indicated_Outline_Offset);
      }
    }

    @include fd-compact() {
      --fdVertNavigation_List_Item_Height: 1.875rem;
    }
  }
}

/* === INTERNAL FOR THIS FILE === */

@mixin _fd-vertical-nav-selected-color($blockList: #{$fd-namespace}-list) {
  &.#{$blockList}__navigation-item--indicated {
    color: var(--sapSelectedColor);

    .#{$blockList}__navigation-item-text,
    .#{$blockList}__navigation-item-icon,
    .#{$blockList}__navigation-item-arrow {
      color: var(--sapSelectedColor);
    }
  }
}
