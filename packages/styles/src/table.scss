@import "./new-settings";
@import "./mixins";
@import "./mixins/table/table-variables";
@import "./mixins/table/table-borders";
@import "./mixins/table/table-sticky";
@import "./mixins/table/table-group-and-tree";

/*!
.fd-table(--compact, --condensed, --no-horizontal-borders, --no-vertical-borders, --fixed, --hidden, --tree, --group)
    thead(.fd-table__header(--no-horizontal-borders, --no-vertical-borders))
    tbody(.fd-table__body(--no-horizontal-borders, --no-vertical-borders))
    tfoot(.fd-table__footer)
        tr(.fd-table__row)([aria-selected])
          td(.fd-table__cell(--status-indicator, --checkbox, --fit-content, --fixed, --expand, --group)) + semantic
*/

.#{$block} {
  --fd-table-header-cell-height: 2.75rem;
  --fd-table-cell-height: 2.75rem;

  $fd-table-cell-padding: 0.5rem;
  $fd-table-basic-background: var(--sapList_Background);

  // BLOCK BASE *******************************************
  // set all BLOCK reset and baseline styles
  &,
  &__cell,
  &__row,
  &__header,
  &__body,
  &__footer,
  &__text {
    @include fd-reset();
  }

  @include fd-table-borders();
  @include fd-table-sticky();
  @include fd-table-group-and-tree();

  width: 100%;
  max-width: 100%;

  /****** Elements ******/

  &__icon {
    @include fd-icon-element-base() {
      @include fd-flex-center();

      color: var(--sapContent_NonInteractiveIconColor);
      font-size: var(--sapFontSmallSize);
    }

    &--navigation {
      @include fd-icon-selector() {
        font-size: var(--sapFontSmallSize);
        width: 2rem;
        min-width: 2rem;
        height: 100%;
      }
    }
  }

  &__header {
    .#{$block}__cell {
      height: var(--fd-table-header-cell-height);
      background-color: var(--sapList_HeaderBackground);
      color: var(--sapList_HeaderTextColor);
      font-weight: var(--fdTable_Header_Cell_Font_Weight);

      @include fd-hover() {
        background-color: var(--fdTable_Header_Cell_Hover_Background);
        color: var(--fdTable_Header_Cell_Hover_Active_Color);
      }

      @include fd-active() {
        background-color: var(--fdTable_Header_Cell_Active_Background);
        color: var(--fdTable_Header_Cell_Hover_Active_Color);
      }
    }
  }

  &__text {
    @include fd-ellipsis();

    word-break: break-word;
    white-space: normal;
    text-shadow: var(--sapContent_TextShadow);

    &--no-wrap {
      white-space: nowrap;
    }
  }

  &__cell {
    text-align: left;
    height: var(--fd-table-cell-height);
    padding: 0 $fd-table-cell-padding;
    color: inherit;
    outline: none;

    $states: (
      "valid": (
        "color": var(--sapSuccessColor),
        "background-color": var(--sapSuccessBorderColor)
      ),
      "warning": (
        "color": var(--sapWarningColor),
        "background-color": var(--sapWarningBorderColor)
      ),
      "error": (
        "color": var(--sapErrorColor),
        "background-color": var(--sapErrorBorderColor)
      ),
      "information": (
        "color": var(--sapInformationColor),
        "background-color": var(--sapInformationBorderColor)
      ),
    );

    @each $name, $state in $states {
      &--#{$name} {
        color: map-get($state, color);
      }

      &--status-indicator {
        &--#{$name} {
          background-color: map-get($state, background-color);
        }
      }
    }

    @include fd-rtl() {
      text-align: right;
    }

    &--no-data {
      text-align: center;
    }

    &--mock {
      padding: 0;
      width: auto;
    }

    &--checkbox {
      width: var(--fd-table-header-cell-height);
      vertical-align: baseline;
      padding: 0;
    }

    &--fit-content {
      width: 0.5rem;
      word-break: keep-all;
      white-space: nowrap;
    }

    &--no-padding {
      padding: 0;
    }

    &--status-indicator {
      width: 0.375rem;
      padding: 0;
    }

    &--navigated {
      box-shadow: inset -0.1875rem 0 var(--sapSelectedColor);

      @include fd-rtl() {
        box-shadow: inset 0.1875rem 0 var(--sapSelectedColor);
      }
    }

    &:first-child:not(.#{$block}__cell--checkbox, &.#{$block}__cell--status-indicator) {
      @include fd-set-padding-left(1rem);

      @include fd-rtl() {
        padding-left: $fd-table-cell-padding;
      }
    }
  }

  &__row {
    background-color: var(--sapList_Background);

    @include fd-selected() {
      background-color: var(--sapList_SelectionBackgroundColor);
    }

    &--hoverable {
      @include fd-selected() {
        @include fd-hover() {
          background-color: var(--sapList_Hover_SelectionBackground);
        }
      }
    }

    &--activable {
      @include fd-selected() {
        @include fd-active() {
          background-color: var(--sapList_Active_Background);
        }
      }
    }
  }

  &__cell,
  &__row {
    &--hoverable {
      @include fd-hover() {
        background-color: var(--sapList_Hover_Background);
        color: var(--fdTable_Hover_Down_Color);
      }
    }

    &--activable,
    &--focusable {
      @include fd-fiori-focus();

      @include fd-selected() {
        @include fd-fiori-focus() {
          outline-color: var(--sapContent_ContrastFocusColor);
        }
      }
    }

    &--activable {
      cursor: pointer;

      @include fd-active() {
        background-color: var(--sapList_Active_Background);
        color: var(--sapList_Active_TextColor);

        * {
          color: var(--sapList_Active_TextColor) !important;
        }

        .#{$block}__cell {
          @include fd-hover() {
            background-color: var(--sapList_Active_Background);
          }
        }

        .#{$block}__text {
          text-shadow: none;
        }

        .#{$block}__icon {
          @include fd-icon-selector() {
            color: var(--sapContent_ContrastIconColor);
          }
        }

        .#{$fd-namespace}-link,
        .#{$fd-namespace}-form-label,
        .#{$fd-namespace}-object-status {
          color: inherit;
        }
      }
    }
  }

  &__footer {
    background-color: var(--sapList_Background);

    .#{$block}__row {
      vertical-align: middle;
    }

    .#{$block}__cell {
      font-weight: bold;
    }
  }

  &__inner {
    @include fd-reset();

    width: 100%;
    display: flex;
    justify-content: space-between;
  }

  &__column-header-icons {
    display: flex;

    .#{$block}__icon:not(:last-child) {
      margin-right: 0.25rem;
    }

    @include fd-rtl() {
      .#{$block}__icon {
        margin-right: 0;
      }

      .#{$block}__icon:not(:last-child) {
        margin-left: 0.25rem;
      }
    }
  }

  &__caption {
    @include fd-screen-reader-only();
  }

  &__item--clickable {
    cursor: pointer;
  }

  &__popover.#{$fd-namespace}-popover {
    height: 100%;
    display: block;
    color: inherit;

    .#{$fd-namespace}-popover__control {
      width: 100%;
      height: 100%;
      color: inherit;

      @include fd-flex-vertical-center();
    }
  }

  /****** Modifiers ******/

  &--pop-in {
    .#{$block}__text {
      color: inherit;
      margin-bottom: 0.5rem;

      &--title {
        font-weight: bold;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }

    .#{$block}__cell {
      &--checkbox {
        + .#{$block}__cell {
          padding-left: 0;

          @include fd-rtl() {
            padding-right: 0;
            padding-left: $fd-table-cell-padding;
          }
        }
      }
    }

    .#{$block}__body {
      .#{$block}__cell {
        height: auto;
      }
    }

    .#{$block}__row--main {
      .#{$block}__cell {
        padding-top: 0.25rem;
        padding-bottom: 0.25rem;
      }

      &.#{$block}__row--hoverable {
        @include fd-hover() {
          + .#{$block}__row--secondary {
            background-color: var(--sapList_Hover_Background);
          }
        }
      }

      @include fd-selected() {
        @include fd-hover() {
          + .#{$block}__row--secondary {
            background-color: var(--sapList_Hover_SelectionBackground);
          }
        }
      }
    }

    .#{$block}__row--secondary {
      background-color: $fd-table-basic-background;

      @include fd-hover() {
        background-color: $fd-table-basic-background;
      }

      .#{$block}__cell {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }

      @include fd-selected() {
        @include fd-hover() {
          background-color: var(--sapList_SelectionBackgroundColor);
        }
      }
    }
  }

  &--compact {
    --fd-table-cell-height: 2rem;
  }

  &--condensed {
    --fd-table-cell-height: 1.5rem;

    .#{$block}__body,
    .#{$block}__footer {
      .#{$block}__cell--checkbox {
        .#{$block}__checkbox-label {
          margin-top: -0.25rem;
          position: absolute;
        }
      }

      .#{$block}__cell,
      .#{$block}__row {
        &--activable,
        &--focusable {
          @include fd-fiori-focus(var(--fdTable_Condensed_Focus_Outline_Offset));
        }
      }
    }
  }

  &--compact,
  &--condensed {
    --fd-table-header-cell-height: 2rem;
  }

  &--hidden {
    display: none;
  }
}
