@use "sass:map";

@import './new-settings';
@import './mixins';

$block: #{$fd-namespace}-rating-indicator;

.#{$block} {
  --ratingIndicator_Opacity: 1;
  --ratingIndicator_Opacity_Hover: 0.9;
  --ratingIndicator_Cursor: pointer;
  --ratingIndicator_Font_Size: 1.5rem;
  --ratingIndicator_Inline_Spacing: 0;
  --ratingIndicator_Item_Spacing: 0.1875rem;
  --ratingIndicator_Margin_Block: 0.8125rem;
  --ratingIndicator_Margin_Block_Compact: 0.8125rem;
  --ratingIndicator_Color: var(--sapContent_UnratedColor);
  --ratingIndicator_Container_Outline: var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);

  @mixin rating-indicator-unselected-items-readonly-disabled($font-size, $spacing) {
    @include fd-readonly() {
      .fd-rating-indicator__item {
        &:has(.fd-rating-indicator__icon--unselected + .fd-rating-indicator__icon--unselected) {
          --ratingIndicator_Font_Size: #{$font-size};
          --ratingIndicator_Inline_Spacing: #{$spacing};
        }
      }
    }

    @include fd-disabled() {
      .fd-rating-indicator__item {
        &:has(.fd-rating-indicator__icon--unselected + .fd-rating-indicator__icon--unselected) {
          --ratingIndicator_Font_Size: #{$font-size};
          --ratingIndicator_Inline_Spacing: #{$spacing};
        }
      }
    }
  }

  @include fd-reset();

  @include fd-inline-flex-vertical-center() {
    gap: 0.5rem;
  };

  margin-inline: 0;
  margin-block: var(--ratingIndicator_Margin_Block);
  opacity: var(--ratingIndicator_Opacity);
  cursor: var(--ratingIndicator_Cursor);

  @include fd-compact-or-condensed() {
    margin-block: var(--ratingIndicator_Margin_Block_Compact);
  }

  &__container {
    @include fd-reset();
    @include fd-inline-flex-vertical-center();

    border-radius: var(--fdRatingIndicator_Container_Border_Radius);
    
    @include fd-focus() {
      outline-offset: 0.1875rem;
      outline: var(--ratingIndicator_Container_Outline);
    }
  }

  &__list {
    @include fd-reset();
    
    @include fd-inline-flex-vertical-center() {
      gap: var(--ratingIndicator_Item_Spacing);
    };

    list-style-type: none;
  }

  &__item {
    @include fd-reset();
    @include fd-inline-flex-center();

    position: relative;
    width: var(--ratingIndicator_Font_Size);
    height: var(--ratingIndicator_Font_Size);
    margin-inline: var(--ratingIndicator_Inline_Spacing);
  }

  &__icon {
    &[class*="sap-icon"] {
      color: var(--ratingIndicator_Color);
      font-size: var(--ratingIndicator_Font_Size, 1.5rem);
      box-shadow: var(--sapContent_TextShadow);
    }
    
    position: absolute;

    &:first-child {
      clip-path: inset(0 50% 0 0);
      left: 0;

      @include fd-rtl() {
        clip-path: inset(0 0 0 50%);
        left: auto;
        right: 0;
      }
    }

    &:last-child {
      clip-path: inset(0 0 0 50%);
      left: 0;

      @include fd-rtl() {
        clip-path: inset(0 50% 0 0);
        left: auto;
        right: 0;
      }
    }

    &--selected {
      --ratingIndicator_Color: var(--sapContent_RatedColor);
    }
  }

  &__dynamic-text {
    @include fd-reset();
    @include fd-ellipsis();

    font-size: var(--sapFontSmallSize);
    color: var(--sapContent_LabelColor);
  }

  // States
  @include fd-hover() {
    opacity: var(--ratingIndicator_Opacity_Hover);
  }

  @include fd-readonly() {
    --ratingIndicator_Cursor: auto;
    --ratingIndicator_Opacity_Hover: 1;
  }

  @include fd-disabled() {
    --ratingIndicator_Cursor: auto;
    --ratingIndicator_Container_Outline: none;
    --ratingIndicator_Opacity: var(--sapContent_DisabledOpacity);
    --ratingIndicator_Opacity_Hover: var(--sapContent_DisabledOpacity);
  }

  @include rating-indicator-unselected-items-readonly-disabled(1.125rem, 0.1875rem);

  // Sizes
  &--lg {
    @include rating-indicator-unselected-items-readonly-disabled(2rem, 0);

    --ratingIndicator_Margin_Block: 0.75rem;
    --ratingIndicator_Margin_Block_Compact: 0.5rem;
    --ratingIndicator_Font_Size: 2rem;
    --ratingIndicator_Item_Spacing: 0.25rem;
  }

  &--md {
    @include rating-indicator-unselected-items-readonly-disabled(1.5rem, 0);

    --ratingIndicator_Margin_Block: 0.75rem;
    --ratingIndicator_Margin_Block_Compact: 0.5rem;
    --ratingIndicator_Font_Size: 1.5rem;
    --ratingIndicator_Item_Spacing: 0.1875rem;
  }

  &--sm {
    @include rating-indicator-unselected-items-readonly-disabled(1.375rem, 0);

    --ratingIndicator_Margin_Block: 0.75rem;
    --ratingIndicator_Margin_Block_Compact: 0.5rem;
    --ratingIndicator_Font_Size: 1.375rem;
    --ratingIndicator_Item_Spacing: 0.1875rem;
  }

  &--xs {
    @include rating-indicator-unselected-items-readonly-disabled(0.75rem, 0);

    --ratingIndicator_Margin_Block: 0.75rem;
    --ratingIndicator_Margin_Block_Compact: 0.5rem;
    --ratingIndicator_Font_Size: 0.75rem;
    --ratingIndicator_Item_Spacing: 0.0625rem;
  }
}
