@import "./mixins";

$block: #{$fd-namespace}-tree;

@mixin set-indentation($level, $padding) {
  &[aria-level="#{$level}"] {
    .#{$block}__item-container {
      padding-left: $padding + 2.75rem;

      @include fd-rtl() {
        padding-left: 1rem;
        padding-right: $padding + 2.75rem;
      }
    }
  }
}

.#{$block} {
  @include fd-reset();

  width: 100%;
  list-style-type: none;

  &[aria-hidden="true"] {
    display: none;
  }

  &.expanded-level-1 {
    .#{$block}__item {
      @include set-indentation(2, 1.5rem);
    }
  }

  &.expanded-level-2 {
    .#{$block}__item {
      @include set-indentation(2, 1rem);
      @include set-indentation(3, 2.5rem);
    }
  }

  &.expanded-level-3,
  &.expanded-level-4,
  &.expanded-level-5 {
    .#{$block}__item {
      @include set-indentation(2, 0.5rem);
      @include set-indentation(3, 1rem);
      @include set-indentation(4, 1.5rem);
      @include set-indentation(5, 2rem);
      @include set-indentation(6, 2.5rem);
    }
  }

  @for $i from 6 through 12 {
    &.expanded-level-#{$i} {
      @for $j from 1 through 12 {
        .#{$block}__item {
          $offset: ($j - 1) * 0.25rem;

          @include set-indentation($j, $offset);
        }
      }
    }
  }

  // ELEMENTS
  &__item {
    @include fd-reset();

    height: 100%;

    &[aria-level="1"] {
      .#{$block}__item-container {
        padding-left: 2.75rem;
        background-color: var(--sapList_Background);
        border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);

        @include fd-rtl() {
          padding-left: 1rem;
          padding-right: 2.75rem;
        }
      }
    }
  }

  &__item-container {
    @include fd-reset();
    @include fd-flex-vertical-center();

    width: 100%;
    min-height: 2.75rem;
    padding-right: 1rem;
    background-color: var(--sapList_AlternatingBackground);
    border-bottom-color: transparent;
  }

  &__expander {
    @include fd-reset();

    @include fd-icon('navigation-right-arrow', 'after') {
      @include fd-flex-center();

      height: 100%;
      min-height: 100%;
      font-size: var(--sapFontLargeSize);
    }

    @include fd-focus() {
      outline: none;
    }

    @include fd-rtl() {
      &::after {
        content: "\e067";
      }

      margin-left: 0;
      margin-right: -2.75rem;
    }

    margin-left: -2.75rem;
    min-width: 2.75rem;
    width: 2.75rem;
    height: 2.75rem;
    background-color: transparent;

    &.is-expanded,
    &[aria-expanded="true"] {
      border-bottom: none;

      &::after {
        content: "\e1e2";
      }
    }
  }

  &__content {
    @include fd-reset();
    @include fd-ellipsis();
    @include fd-flex-vertical-center();

    height: 100%;
    width: 100%;

    &--wrap {
      white-space: initial;
      overflow: visible;
      text-overflow: initial;

      .#{$block}__text {
        white-space: initial;
        overflow: visible;
        text-overflow: initial;
      }
    }
  }

  &__navigation-indication {
    @include fd-icon('slim-arrow-right', 'after') {
      @include fd-flex-center();

      min-width: 2.5rem;
      font-size: 0.75rem;
      text-align: center;
      color: var(--sapContent_NonInteractiveIconColor);
    }

    &:last-child {
      margin-right: -1rem;
    }

    @include fd-rtl() {
      @include fd-icon('slim-arrow-left', 'after');

      &:last-child {
        margin-right: 0;
        margin-left: -1rem;
      }
    }
  }

  &__icon {
    min-width: 2.75rem;
    min-height: 100%;
    font-size: 1.125rem;
    text-align: center;
    color: var(--sapContent_NonInteractiveIconColor);
  }

  &__text {
    @include fd-reset();
    @include fd-ellipsis();

    font-size: var(--sapFontLargeSize);
    color: var(--sapList_TextColor);
  }

  // MODIFIERS
  &--compact {
    .#{$block}__item-container {
      height: 2rem;
    }

    .#{$block}__text {
      font-size: var(--sapFontSize);
    }

    .#{$block}__icon {
      min-width: 2rem;
    }
  }
}
