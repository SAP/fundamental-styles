@import "./mixins";
@import "./mixins/list/list-definitions";
@import "./mixins/tree/mixins";
@import "./mixins/tree/modifiers";

// VARIABLES
$block: #{$fd-namespace}-tree;
$button: #{$fd-namespace}-button;

$fd-tree-item-height: 2.75rem !default;
$fd-tree-item-height-compact: 2rem !default;
$fd-tree-item-padding-right: 1rem !default;
$fd-tree-item-padding-right-negative: -1rem !default;
$fd-tree-expander-size: 2.75rem !default;
$fd-tree-expander-size-compact: 2rem !default;
$fd-tree-expander-size-negative: -2.75rem !default;
$fd-tree-expander-size-negative-compact: -2rem !default;
$fd-tree-icon-size: 2.75rem !default;
$fd-tree-icon-size-compact: 2rem !default;
$fd-tree-item-transparent-border-bottom: var(--sapList_BorderWidth) solid transparent !default;
$fd-tree-item-selected-border-bottom: var(--sapList_BorderWidth) solid var(--sapList_SelectionBorderColor) !default;

@mixin text-wrapping-behaviour() {
  white-space: normal;
  overflow: visible;
  text-overflow: initial;
}

%fd-tree-item-with-states {
  @include fd-tree-item-states();
}

// BLOCK
.#{$block} {
  @include fd-tree-highlight-indicator();
  @include fd-tree-expand-indents();
  @include fd-reset();

  width: 100%;
  list-style-type: none;

  &[aria-hidden="true"] {
    display: none;
  }

  // ELEMENTS
  &__item {
    @include fd-reset();

    $itemScope: &;

    &[aria-level="1"] {
      > #{$itemScope}-container {
        padding-left: $fd-tree-expander-size;
        background: var(--sapList_Background);
        border-bottom: var(--sapList_BorderWidth) solid var(--sapList_BorderColor);

        @include fd-rtl() {
          padding-left: $fd-tree-item-padding-right;
          padding-right: $fd-tree-expander-size;
        }

        @include fd-selected() {
          @include fd-list-item-base-selected-state();
        }

        &--active {
          @extend %fd-tree-item-with-states;
        }
      }
    }

    &-container {
      @include fd-reset();
      @include fd-flex-vertical-center();

      position: relative;

      @include fd-selected() {
        @include fd-list-item-base-selected-state();
      }

      @include fd-navigated() {
        @include fd-list-item-base-navigated-state();
      }

      @include fd-list-fake-outline() {
        bottom: 0.0625rem;
      }

      width: 100%;
      min-height: $fd-tree-item-height;
      padding-right: $fd-tree-item-padding-right;
      background: var(--sapList_AlternatingBackground);
      border-bottom: $fd-tree-item-transparent-border-bottom;

      &--active {
        @extend %fd-tree-item-with-states;
      }
    }
  }

  &__expander {
    @include fd-reset();

    .#{$block}__icon {
      @include fd-icon-selector() {
        font-size: var(--sapFontLargeSize);
        color: var(--sapButton_IconColor);

        @include fd-flex-center();
      }
    }

    cursor: pointer;
    color: var(--sapButton_IconColor);
    background: transparent;
    min-width: $fd-tree-expander-size;
    min-height: $fd-tree-expander-size;
    margin-left: $fd-tree-expander-size-negative;

    @include fd-rtl() {
      margin-left: 0;
      margin-right: $fd-tree-expander-size-negative;
    }

    @include fd-expanded() {
      border-bottom: none;
    }
  }

  &__content {
    @include fd-reset();
    @include fd-ellipsis();
    @include fd-flex-vertical-center();

    min-height: $fd-tree-item-height;
    width: 100%;
    text-decoration: none;

    &--wrap {
      @include text-wrapping-behaviour();

      .#{$block}__text {
        @include text-wrapping-behaviour();

        line-height: 1.4;
      }
    }
  }

  &__icon {
    @include fd-flex-center();

    min-width: $fd-tree-icon-size;
    min-height: $fd-tree-icon-size;
    line-height: $fd-tree-icon-size; // IE11 fix for vertical alignment

    @include fd-icon-selector() {
      font-size: 1.125rem;
      color: var(--sapContent_NonInteractiveIconColor);

      @include fd-flex-center();
    }

    &--navigation {
      @include fd-icon-selector() {
        min-width: 2.5rem;
        font-size: 0.75rem;
      }

      &:last-child {
        margin-right: $fd-tree-item-padding-right-negative;
      }

      @include fd-rtl() {
        &:last-child {
          margin-right: 0;
          margin-left: $fd-tree-item-padding-right-negative;
        }
      }
    }
  }

  &__text {
    @include fd-reset();
    @include fd-ellipsis();

    width: 100%;
    font-size: var(--sapFontLargeSize);
    color: var(--sapList_TextColor);
    line-height: $fd-tree-item-height; // IE11 fix for vertical alignment
  }

  // MODIFIERS
  @include fd-tree-compact($block);
  @include fd-tree-borderless($block);
  @include fd-tree-active($block);
  @include fd-tree-no-data($block);
}
